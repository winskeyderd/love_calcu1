<!DOCTYPE html>
<html>
  <head>
    <title>Mystical Love Calculator - Nebula's Cosmic Readings</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <style>
  :root {
    --primary-dark: #0a0a0a;
    --secondary-dark: #1a1a2e;
    --accent-purple: #6c5ce7;
    --accent-gold: #fdcb6e;
    --accent-pink: #fd79a8;
    --accent-blue: #74b9ff;
    --text-light: #ddd;
    --text-gold: #f39c12;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
    color: var(--text-light);
    font-family: 'Crimson Text', serif;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
    padding-top: 80px; /* Prevent navbar overlap */
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><radialGradient id="star" cx="50%" cy="50%"><stop offset="0%" style="stop-color:white;stop-opacity:1" /><stop offset="100%" style="stop-color:white;stop-opacity:0" /></radialGradient></defs><circle cx="20" cy="20" r="1" fill="url(%23star)" opacity="0.8"><animate attributeName="opacity" values="0.8;0.3;0.8" dur="3s" repeatCount="indefinite"/></circle><circle cx="80" cy="30" r="0.8" fill="url(%23star)" opacity="0.6"><animate attributeName="opacity" values="0.6;0.2;0.6" dur="4s" repeatCount="indefinite"/></circle><circle cx="60" cy="70" r="1.2" fill="url(%23star)" opacity="0.7"><animate attributeName="opacity" values="0.7;0.1;0.7" dur="2s" repeatCount="indefinite"/></circle><circle cx="30" cy="80" r="0.6" fill="url(%23star)" opacity="0.5"><animate attributeName="opacity" values="0.5;0.1;0.5" dur="3.5s" repeatCount="indefinite"/></circle><circle cx="90" cy="60" r="0.9" fill="url(%23star)" opacity="0.6"><animate attributeName="opacity" values="0.6;0.2;0.6" dur="2.8s" repeatCount="indefinite"/></circle></svg>') repeat;
    background-size: 200px 200px;
    z-index: -1;
    pointer-events: none;
  }

  .mystical-navbar {
    background: rgba(26, 26, 46, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(108, 92, 231, 0.3);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }

  .navbar-brand {
    font-family: 'Cinzel', serif;
    font-weight: 700;
    font-size: 1.8rem;
    color: var(--accent-gold) !important;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  .navbar-nav {
    align-items: center;
    gap: 0.5rem;
  }

  .nav-link {
    color: var(--text-light) !important;
    font-weight: 500;
    transition: all 0.3s ease;
    position: relative;
    padding: 0.5rem 1rem !important;
    display: flex;
    align-items: center;
    white-space: nowrap;
  }

  .nav-link::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent-purple), var(--accent-pink));
    transition: all 0.3s ease;
    transform: translateX(-50%);
  }

  .nav-link:hover::before,
  .nav-link.active::before {
    width: 80%;
  }

  .nav-link:hover {
    color: var(--accent-gold) !important;
    text-shadow: 0 0 10px rgba(253, 203, 110, 0.5);
  }

  .dropdown-menu {
    background: rgba(26, 26, 46, 0.95) !important;
    border: 1px solid rgba(108, 92, 231, 0.3) !important;
    border-radius: 10px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    margin-top: 0.5rem;
  }

  .dropdown-item {
    color: var(--text-light) !important;
    padding: 0.75rem 1.5rem;
    transition: all 0.3s ease;
    border-radius: 5px;
    margin: 0.2rem 0.5rem;
    display: flex;
    align-items: center;
  }

  .dropdown-item:hover {
    background: rgba(108, 92, 231, 0.2) !important;
    color: var(--accent-gold) !important;
    transform: translateX(5px);
  }

  .dropdown-divider {
    border-color: rgba(108, 92, 231, 0.3) !important;
    margin: 0.5rem 0;
  }

  .badge {
    margin-left: 0.5rem;
    font-size: 0.75rem;
  }

  .navbar-toggler {
    border: 1px solid rgba(108, 92, 231, 0.5);
    padding: 0.4rem 0.8rem;
  }

  .navbar-toggler:focus {
    box-shadow: 0 0 0 0.2rem rgba(108, 92, 231, 0.25);
  }

  .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28221, 221, 221, 1%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
  }

  .mystical-card {
    background: rgba(26, 26, 46, 0.8);
    border: 1px solid rgba(108, 92, 231, 0.3);
    border-radius: 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;
    overflow: hidden;
    position: relative;
    margin-bottom: 2rem;
  }

  .mystical-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, transparent, rgba(108, 92, 231, 0.1), transparent);
    pointer-events: none;
  }

  .mystical-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(108, 92, 231, 0.2);
  }

  .card-header-mystical {
    background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
    color: white;
    font-family: 'Cinzel', serif;
    font-weight: 600;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
  }

  .card-header-mystical::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    animation: shimmer 3s infinite;
  }

  @keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  .form-control-mystical {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(108, 92, 231, 0.5);
    color: var(--text-light);
    border-radius: 10px;
    padding: 12px 16px;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    width: 100%;
  }

  .form-control-mystical:focus {
    background: rgba(0, 0, 0, 0.5);
    border-color: var(--accent-gold);
    box-shadow: 0 0 20px rgba(253, 203, 110, 0.3);
    color: var(--text-light);
  }

  .form-control-mystical::placeholder {
    color: rgba(221, 221, 221, 0.6);
  }

  .btn-mystical {
    background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
    border: none;
    color: white;
    font-family: 'Cinzel', serif;
    font-weight: 600;
    padding: 12px 30px;
    border-radius: 25px;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    text-transform: uppercase;
    letter-spacing: 1px;
    width: 100%;
  }

  .btn-mystical::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    transition: all 0.3s ease;
    transform: translate(-50%, -50%);
  }

  .btn-mystical:hover::before {
    width: 200px;
    height: 200px;
  }

  .btn-mystical:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(108, 92, 231, 0.4);
  }

  .flames-result {
    font-size: 4rem;
    font-family: 'Cinzel', serif;
    font-weight: 700;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
    background: linear-gradient(135deg, var(--accent-gold), var(--accent-pink));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: glow 2s ease-in-out infinite alternate;
  }

  @keyframes glow {
    from { filter: drop-shadow(0 0 5px rgba(253, 203, 110, 0.5)); }
    to { filter: drop-shadow(0 0 20px rgba(253, 203, 110, 0.8)); }
  }

  .tarot-message {
    background: rgba(0, 0, 0, 0.3);
    border-left: 4px solid var(--accent-gold);
    padding: 15px;
    margin: 15px 0;
    border-radius: 0 10px 10px 0;
    font-style: italic;
    position: relative;
  }

  .tarot-message::before {
    content: '"';
    position: absolute;
    top: -10px;
    left: 10px;
    font-size: 2rem;
    color: var(--accent-gold);
    font-family: 'Cinzel', serif;
  }

  .leaderboard-item {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(108, 92, 231, 0.3);
    border-radius: 10px;
    padding: 15px;
    margin: 10px 0;
    transition: all 0.3s ease;
  }

  .leaderboard-item:hover {
    background: rgba(108, 92, 231, 0.1);
    transform: translateX(5px);
  }

  .rank-badge {
    background: linear-gradient(135deg, var(--accent-gold), var(--accent-pink));
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-family: 'Cinzel', serif;
  }

  .floating-hearts {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
  }

  .heart {
    position: absolute;
    color: rgba(253, 121, 168, 0.3);
    font-size: 20px;
    animation: float 6s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
    10%, 90% { opacity: 1; }
    50% { transform: translateY(-10vh) rotate(180deg); }
  }

  @media (max-width: 991px) {
    .navbar-nav {
      gap: 0;
      padding-top: 1rem;
      flex-direction: column;
    }

    .nav-link {
      padding: 0.75rem 1rem !important;
      justify-content: center;
      text-align: center;
    }

    .dropdown-menu {
      position: static !important;
      float: none;
      width: 100%;
      margin-top: 0;
      border: none;
      box-shadow: none;
      background: rgba(0, 0, 0, 0.2) !important;
    }

    .dropdown-item {
      text-align: center;
      padding: 0.5rem 1rem;
    }

    .btn-mystical {
      width: 100%;
      font-size: 1rem;
      padding: 10px 16px;
    }

    .form-control-mystical {
      width: 100%;
    }

    .container {
      padding: 0 1rem;
    }

    .floating-hearts {
      z-index: 0;
    }
  }

  @media (max-width: 768px) {
    .flames-result {
      font-size: 2.2rem;
      text-align: center;
    }

    .navbar-brand {
      font-size: 1.3rem;
    }

    .card-header-mystical {
      text-align: center;
      font-size: 1rem;
    }

    .mystical-card {
      margin: 1rem 0;
    }

    .tarot-message {
      font-size: 0.95rem;
      padding: 10px;
    }
  }
  @media (min-width: 992px) and (max-width: 1200px) {
  .navbar-brand {
    font-size: 1.5rem;
  }

  .nav-link {
    font-size: 1rem;
    padding: 0.5rem 0.75rem !important;
  }

  .btn-mystical {
    font-size: 1rem;
    padding: 10px 24px;
  }

  .form-control-mystical {
    font-size: 1rem;
    padding: 10px 14px;
  }

  .flames-result {
    font-size: 3rem;
  }

  .card-header-mystical {
    font-size: 1.1rem;
  }

  .tarot-message {
    font-size: 1rem;
  }

  .container {
    max-width: 90%;
  }
}
.mystical-link {
  color: var(--accent-gold);
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  position: relative;
  display: inline-block;
  margin-bottom: 0.5rem;
}

.mystical-link::before {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(to right, var(--accent-purple), var(--accent-pink));
  transition: width 0.3s ease;
}

.mystical-link:hover::before {
  width: 100%;
}

.mystical-link:hover {
  color: var(--accent-pink);
  text-shadow: 0 0 6px rgba(253, 121, 168, 0.6);
}

</style>

  </head>

  <body>
    <div class="floating-hearts">
      <div class="heart" style="left: 10%; animation-delay: 0s;">💫</div>
      <div class="heart" style="left: 20%; animation-delay: 1s;">✨</div>
      <div class="heart" style="left: 30%; animation-delay: 2s;">🌟</div>
      <div class="heart" style="left: 40%; animation-delay: 3s;">💖</div>
      <div class="heart" style="left: 50%; animation-delay: 4s;">🔮</div>
      <div class="heart" style="left: 60%; animation-delay: 5s;">✨</div>
      <div class="heart" style="left: 70%; animation-delay: 1.5s;">🌙</div>
      <div class="heart" style="left: 80%; animation-delay: 2.5s;">⭐</div>
      <div class="heart" style="left: 90%; animation-delay: 3.5s;">💫</div>
    </div>

    <nav class="navbar navbar-expand-lg mystical-navbar fixed-top">
  <div class="container">
    <%= link_to root_path, class: "navbar-brand" do %>
      <i class="fas fa-crystal-ball"></i> Nebula's Love Oracle
    <% end %>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <%= link_to "💫 Calculate", root_path, class: "nav-link #{'active' if current_page?(root_path)}" %>
        </li>
        <li class="nav-item">
          <%= link_to "🏆 Leaderboard", leaderboard_path, class: "nav-link #{'active' if current_page?(leaderboard_path)}" %>
        </li>

        <% if user_signed_in? %>
          <li class="nav-item">
            <%= link_to "📚 History", history_path, class: "nav-link #{'active' if current_page?(history_path)}" %>
          </li>
          <li class="nav-item">
            <%= link_to "📜 Quotes", rewards_path, class: "nav-link #{'active' if current_page?(rewards_path)}" %>
          </li>
        <% end %>

        <li class="nav-item">
          <%= link_to "🔮 About", about_path, class: "nav-link #{'active' if current_page?(about_path)}" %>
        </li>
        <li class="nav-item">
          <%= link_to "📧 Contact", contact_path, class: "nav-link #{'active' if current_page?(contact_path)}" %>
        </li>

        <% if user_signed_in? %>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown">
              <i class="fas fa-user-circle"></i> <%= current_user.username %>
              <% if current_user.login_streak && current_user.login_streak > 1 %>
                <span class="badge bg-warning">🔥<%= current_user.login_streak %></span>
              <% end %>
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <%= link_to "👤 Profile", profile_path, class: "dropdown-item" %>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <%= link_to "🚪 Logout", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
              </li>
            </ul>
          </li>
        <% else %>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="authDropdown" role="button" data-bs-toggle="dropdown">
              <i class="fas fa-user"></i> Account
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <%= link_to "🔐 Login", new_user_session_path, class: "dropdown-item" %>
              </li>
              <li>
                <%= link_to "📝 Sign Up", new_user_registration_path, class: "dropdown-item" %>
              </li>
            </ul>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</nav>

    <div class="container-fluid" style="margin-top: 100px;">
      <div class="container">
        <% if flash[:error] %>
          <div class="alert alert-danger alert-dismissible fade show" role="alert" style="background: rgba(220, 53, 69, 0.2); border: 1px solid rgba(220, 53, 69, 0.5); color: #f8d7da;">
            <%= flash[:error] %>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        <% end %>
        
        <%= yield %>
      </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Add mystical particle effects
      document.addEventListener('DOMContentLoaded', function() {
        // Create floating particles
        function createParticle() {
          const particle = document.createElement('div');
          particle.style.position = 'fixed';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = '100%';
          particle.style.width = '2px';
          particle.style.height = '2px';
          particle.style.background = 'rgba(108, 92, 231, 0.8)';
          particle.style.borderRadius = '50%';
          particle.style.pointerEvents = 'none';
          particle.style.zIndex = '-1';
          particle.style.animation = 'float 8s linear infinite';
          
          document.body.appendChild(particle);
          
          setTimeout(() => {
            particle.remove();
          }, 8000);
        }
        
        // Create particles periodically
        setInterval(createParticle, 2000);
        
        // Add hover effects to cards
        document.querySelectorAll('.mystical-card').forEach(card => {
          card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px) scale(1.02)';
          });
          
          card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
          });
        });
      });
      
    </script>
  </body>
</html>